{% extends 'base.html' %}

{% block title %}
    –í—ñ–¥–≥—É–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤
{% endblock %}

{% block body %}
<div class="container mt-4">
    <h1 class="mb-4">–í—ñ–¥–≥—É–∫–∏ –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á—ñ–≤</h1>

    {% if reviews %}
        <ul class="list-group">
            {% for r in reviews %}
                <li class="list-group-item d-flex justify-content-between align-items-start">
                    <div>
                        <h5 class="mb-1">{{ r.title }}</h5>
                        <p class="mb-1">{{ r.content }}</p>
                        <small class="text-muted">
                            –ê–≤—Ç–æ—Ä: {{ r.username }}
                            {% if current_user.is_authenticated and current_user.id == r.user_id %}
                                <span class="text-success">(–í–∞—à –≤—ñ–¥–≥—É–∫)</span>
                            {% endif %}
                        </small>
                    </div>

                    {% if current_user.is_authenticated and (is_admin or current_user.id == r.user_id) %}
                        <a href="{{ url_for('delete_review', review_id=r.id) }}"
                           class="btn btn-sm btn-danger ms-3"
                           onclick="return confirm('–í–∏ –≤–ø–µ–≤–Ω–µ–Ω—ñ, —â–æ —Ö–æ—á–µ—Ç–µ –≤–∏–¥–∞–ª–∏—Ç–∏ —Ü–µ–π –≤—ñ–¥–≥—É–∫?');">
                           üóë –í–∏–¥–∞–ª–∏—Ç–∏
                        </a>
                    {% endif %}
                </li>
            {% endfor %}
        </ul>
    {% else %}
        <p>–©–µ –Ω–µ–º–∞—î –≤—ñ–¥–≥—É–∫—ñ–≤.</p>
    {% endif %}

    <div class="mt-3">
        <a href="/" class="btn btn-secondary">–ù–∞ –≥–æ–ª–æ–≤–Ω—É</a>

        {% if current_user.is_authenticated %}
            <a href="/add_review" class="btn btn-primary">–î–æ–¥–∞—Ç–∏ –≤—ñ–¥–≥—É–∫</a>
        {% endif %}
    </div>
</div>
{% endblock %}
